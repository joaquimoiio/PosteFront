<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Dashboard do Sistema de Gerenciamento de Vendas de Postes">
    <title>Dashboard - Gerenciador de Vendas de Postes</title>
    <link rel="stylesheet" href="css/index.css">
</head>

<body>
    <!-- Header Principal -->
    <header class="header" role="banner">
        <div class="header-content">
            <h1>⚡ Gerenciador de Vendas de Postes</h1>
            <p>Dashboard - Visão Geral do Negócio</p>
        </div>
    </header>

    <!-- Navegação Principal -->
    <nav class="main-nav" role="navigation" aria-label="Navegação principal">
        <div class="nav-container">
            <a href="index.html" class="nav-item active" aria-current="page">
                <span class="nav-icon" aria-hidden="true">📊</span>
                <span class="nav-text">Dashboard</span>
            </a>
            <a href="vendas.html" class="nav-item">
                <span class="nav-icon" aria-hidden="true">📋</span>
                <span class="nav-text">Vendas</span>
            </a>
            <a href="despesas.html" class="nav-item">
                <span class="nav-icon" aria-hidden="true">💸</span>
                <span class="nav-text">Despesas</span>
            </a>
            <a href="postes.html" class="nav-item">
                <span class="nav-icon" aria-hidden="true">⚡</span>
                <span class="nav-text">Postes</span>
            </a>
            <a href="relatorios.html" class="nav-item">
                <span class="nav-icon" aria-hidden="true">📈</span>
                <span class="nav-text">Relatórios</span>
            </a>
        </div>
    </nav>

    <!-- Conteúdo Principal -->
    <main class="main-content" role="main">
        <div class="dashboard-page">

            <!-- Seção de Filtros de Período -->
            <section class="dashboard-section filter-section" aria-labelledby="filtros-titulo">
                <header class="section-header">
                    <h2 id="filtros-titulo">📅 Período de Análise</h2>
                </header>

                <div class="filter-container">
                    <div class="filter-grid">
                        <div class="filter-group">
                            <label for="filtro-data-inicio" class="filter-label">
                                <span class="label-icon">📅</span>
                                Data Início
                            </label>
                            <input type="date" id="filtro-data-inicio" class="filter-input" lang="pt-BR">
                        </div>

                        <div class="filter-group">
                            <label for="filtro-data-fim" class="filter-label">
                                <span class="label-icon">📅</span>
                                Data Fim
                            </label>
                            <input type="date" id="filtro-data-fim" class="filter-input" lang="pt-BR">
                        </div>

                        <div class="filter-actions">
                            <button type="button" class="btn btn-primary" onclick="applyPeriodFilter()">
                                <span class="btn-icon">🔍</span>
                                Aplicar Filtro
                            </button>
                            <button type="button" class="btn btn-secondary" onclick="clearPeriodFilter()">
                                <span class="btn-icon">🧹</span>
                                Limpar
                            </button>
                        </div>
                    </div>

                </div>
            </section>

            <!-- Seção: Vendas por Tipo -->
            <section class="dashboard-section" aria-labelledby="vendas-titulo">
                <header class="section-header">
                    <h2 id="vendas-titulo">
                        <span class="section-icon">📊</span>
                        Vendas por Tipo
                    </h2>
                </header>

                <div class="cards-grid">
                    <article class="metric-card tipo-e">
                        <div class="card-content">
                            <div class="card-header">
                                <span class="card-icon">📈</span>
                                <h3>Vendas Extras (E)</h3>
                            </div>
                            <div class="metric-value" id="vendas-tipo-e" aria-live="polite">0</div>
                        </div>
                    </article>

                    <article class="metric-card tipo-v">
                        <div class="card-content">
                            <div class="card-header">
                                <span class="card-icon">🛒</span>
                                <h3>Vendas Normais (V)</h3>
                            </div>
                            <div class="metric-value" id="vendas-tipo-v" aria-live="polite">0</div>
                        </div>
                    </article>

                    <article class="metric-card tipo-l">
                        <div class="card-content">
                            <div class="card-header">
                                <span class="card-icon">🏪</span>
                                <h3>Vendas Loja (L)</h3>
                            </div>
                            <div class="metric-value" id="vendas-tipo-l" aria-live="polite">0</div>
                        </div>
                    </article>

                    <article class="metric-card total">
                        <div class="card-content">
                            <div class="card-header">
                                <span class="card-icon">📋</span>
                                <h3>Total de Vendas</h3>
                            </div>
                            <div class="metric-value" id="total-vendas" aria-live="polite">0</div>
                        </div>
                    </article>
                </div>
            </section>

            <!-- Seção: Valores por Tipo -->
            <section class="dashboard-section" aria-labelledby="valores-titulo">
                <header class="section-header">
                    <h2 id="valores-titulo">
                        <span class="section-icon">💰</span>
                        Valores por Categoria
                    </h2>
                </header>

                <div class="cards-grid cards-grid-two">
                    <article class="metric-card warning">
                        <div class="card-content">
                            <div class="card-header">
                                <span class="card-icon">💎</span>
                                <h3>Valores Extras (E)</h3>
                            </div>
                            <div class="metric-value" id="total-extras-e" aria-live="polite">R$ 0,00</div>
                        </div>
                    </article>

                    <article class="metric-card success">
                        <div class="card-content">
                            <div class="card-header">
                                <span class="card-icon">🚚</span>
                                <h3>Frete Loja (L)</h3>
                            </div>
                            <div class="metric-value" id="total-frete-loja" aria-live="polite">R$ 0,00</div>
                        </div>
                    </article>
                </div>
            </section>

            <!-- Seção: Resumo Financeiro -->
            <section class="dashboard-section financial-section" aria-labelledby="financeiro-titulo">
                <header class="section-header">
                    <h2 id="financeiro-titulo">
                        <span class="section-icon">💰</span>
                        Resumo Financeiro
                    </h2>
                    <div class="section-actions">
                        <button type="button" class="btn btn-secondary btn-small" onclick="mostrarDetalhesCalculo()">
                            <span class="btn-icon">📋</span>
                            Ver Detalhes
                        </button>
                        <button type="button" class="btn btn-secondary btn-small" onclick="refreshDashboard()">
                            <span class="btn-icon">🔄</span>
                            Atualizar
                        </button>
                    </div>
                </header>

                <div class="cards-grid">
                    <article class="metric-card success">
                        <div class="card-content">
                            <div class="card-header">
                                <span class="card-icon">💵</span>
                                <h3>Total Arrecadado (V)</h3>
                            </div>
                            <div class="metric-value" id="valor-total-vendas" aria-live="polite">R$ 0,00</div>
                        </div>
                    </article>

                    <article class="metric-card info">
                        <div class="card-content">
                            <div class="card-header">
                                <span class="card-icon">📦</span>
                                <h3>Custo Eletrons (V)</h3>
                            </div>
                            <div class="metric-value" id="total-venda-postes" aria-live="polite">R$ 0,00</div>
                        </div>
                    </article>

                    <!-- MUDANÇA PRINCIPAL: Substituir "Contribuições E + L" por "Custo Eletrons - L" -->
                    <article class="metric-card warning">
                        <div class="card-content">
                            <div class="card-header">
                                <span class="card-icon">⚡</span>
                                <h3>Custo Eletrons - L</h3>
                            </div>
                            <div class="metric-value" id="custo-eletrons-l" aria-live="polite">R$ 0,00</div>
                            <small class="card-note">Custo Postes - Frete Loja</small>
                        </div>
                    </article>

                    <article class="metric-card danger">
                        <div class="card-content">
                            <div class="card-header">
                                <span class="card-icon">💸</span>
                                <h3>Outras Despesas</h3>
                            </div>
                            <div class="metric-value" id="total-despesas" aria-live="polite">R$ 0,00</div>
                        </div>
                    </article>
                </div>
            </section>

            <!-- Seção: Detalhamento de Despesas -->
            <section class="dashboard-section expenses-section" aria-labelledby="despesas-titulo">
                <header class="section-header">
                    <h2 id="despesas-titulo">
                        <span class="section-icon">💸</span>
                        Detalhamento de Despesas
                    </h2>
                </header>

                <div class="cards-grid cards-grid-three">
                    <article class="metric-card danger">
                        <div class="card-content">
                            <div class="card-header">
                                <span class="card-icon">📋</span>
                                <h3>Outras Despesas</h3>
                            </div>
                            <div class="metric-value" id="total-outras-despesas-detalhado" aria-live="polite">R$ 0,00
                            </div>
                        </div>
                    </article>

                    <article class="metric-card warning">
                        <div class="card-content">
                            <div class="card-header">
                                <span class="card-icon">👥</span>
                                <h3>Despesas Funcionário</h3>
                            </div>
                            <div class="metric-value" id="total-despesas-funcionario-detalhado" aria-live="polite">R$
                                0,00</div>
                        </div>
                    </article>

                    <article class="metric-card neutral">
                        <div class="card-content">
                            <div class="card-header">
                                <span class="card-icon">💰</span>
                                <h3>Total Geral</h3>
                            </div>
                            <div class="metric-value" id="total-geral-despesas" aria-live="polite">R$ 0,00</div>
                        </div>
                    </article>
                </div>
            </section>

            <!-- Seção: Distribuição de Lucros -->
            <section class="dashboard-section profit-section" aria-labelledby="lucros-titulo">
                <header class="section-header">
                    <h2 id="lucros-titulo">
                        <span class="section-icon">💎</span>
                        Distribuição de Lucros
                    </h2>
                </header>

                <div class="cards-grid">
                    <article class="profit-card total-profit">
                        <div class="card-content">
                            <div class="card-header">
                                <span class="card-icon">💰</span>
                                <h3>Lucro Total</h3>
                            </div>
                            <div class="metric-value" id="lucro-total" aria-live="polite">R$ 0,00</div>
                            <small class="card-note">Base para distribuição</small>
                        </div>
                    </article>

                    <article class="profit-card partner-cicero">
                        <div class="card-content">
                            <div class="card-header">
                                <span class="card-icon">👨</span>
                                <h3>Parte do Cícero</h3>
                            </div>
                            <div class="metric-value" id="parte-cicero" aria-live="polite">R$ 0,00</div>
                            <small class="card-note">50% do lucro total</small>
                        </div>
                    </article>

                    <article class="profit-card partner-gilberto">
                        <div class="card-content">
                            <div class="card-header">
                                <span class="card-icon">👨</span>
                                <h3>Parte do Gilberto</h3>
                            </div>
                            <div class="metric-value" id="parte-gilberto" aria-live="polite">R$ 0,00</div>
                            <small class="card-note">25% menos funcionário</small>
                        </div>
                    </article>

                    <article class="profit-card partner-jefferson">
                        <div class="card-content">
                            <div class="card-header">
                                <span class="card-icon">👨</span>
                                <h3>Parte do Jefferson</h3>
                            </div>
                            <div class="metric-value" id="parte-jefferson" aria-live="polite">R$ 0,00</div>
                            <small class="card-note">25% menos funcionário</small>
                        </div>
                    </article>
                </div>
            </section>

            <!-- Seção: Estatísticas Gerais -->
            <section class="dashboard-section stats-section" aria-labelledby="estatisticas-titulo">
                <header class="section-header">
                    <h2 id="estatisticas-titulo">
                        <span class="section-icon">📈</span>
                        Estatísticas Gerais
                    </h2>
                </header>

                <div class="stats-grid">
                    <article class="stat-item">
                        <div class="stat-content">
                            <span class="stat-icon">⚡</span>
                            <div class="stat-number" id="total-postes" aria-live="polite">0</div>
                            <div class="stat-label">Postes Ativos</div>
                        </div>
                    </article>

                    <article class="stat-item">
                        <div class="stat-content">
                            <span class="stat-icon">💸</span>
                            <div class="stat-number" id="total-despesas-count" aria-live="polite">0</div>
                            <div class="stat-label">Total Despesas</div>
                        </div>
                    </article>

                    <article class="stat-item">
                        <div class="stat-content">
                            <span class="stat-icon">💰</span>
                            <div class="stat-number" id="ticket-medio" aria-live="polite">R$ 0,00</div>
                            <div class="stat-label">Ticket Médio (V)</div>
                        </div>
                    </article>

                    <article class="stat-item">
                        <div class="stat-content">
                            <span class="stat-icon">📊</span>
                            <div class="stat-number" id="margem-lucro" aria-live="polite">0%</div>
                            <div class="stat-label">Margem de Lucro</div>
                        </div>
                    </article>
                </div>
            </section>

        </div>
    </main>

    <!-- Overlay de Carregamento -->
    <div id="loading-overlay" class="loading-overlay" role="status" aria-live="polite" aria-hidden="true">
        <div class="spinner" aria-hidden="true"></div>
        <p>Carregando dados...</p>
    </div>

    <!-- Container de Alertas -->
    <div id="alert-container" class="alert-container" role="alert" aria-live="assertive" aria-atomic="true"></div>

    <script src="js/index.js"></script>
</body>

</html>