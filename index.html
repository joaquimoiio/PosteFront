<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Dashboard do Sistema de Gerenciamento de Vendas de Postes - Relatórios e Análises">
    <title>Dashboard - Gerenciador de Vendas de Postes</title>
    <link rel="stylesheet" href="css/index.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
</head>
<body>
    <!-- Header Principal -->
    <header class="header" role="banner">
        <div class="header-content">
            <h1>⚡ Gerenciador de Vendas de Postes</h1>
            <p>Dashboard - Visão Geral do Negócio</p>
        </div>
    </header>

    <!-- Navegação Principal -->
    <nav class="main-nav" role="navigation" aria-label="Navegação principal">
        <div class="nav-container">
            <a href="index.html" class="nav-item active" aria-current="page">
                <span class="nav-icon" aria-hidden="true">📊</span>
                <span class="nav-text">Dashboard</span>
            </a>
            <a href="vendas.html" class="nav-item">
                <span class="nav-icon" aria-hidden="true">📋</span>
                <span class="nav-text">Vendas</span>
            </a>
            <a href="despesas.html" class="nav-item">
                <span class="nav-icon" aria-hidden="true">💸</span>
                <span class="nav-text">Despesas</span>
            </a>
            <a href="postes.html" class="nav-item">
                <span class="nav-icon" aria-hidden="true">⚡</span>
                <span class="nav-text">Postes</span>
            </a>
        </div>
    </nav>

    <!-- Conteúdo Principal -->
    <main class="main-content" role="main">
        <div class="dashboard-page">

            <!-- Seção: Vendas por Tipo -->
            <section class="dashboard-section" aria-labelledby="vendas-titulo">
                <header class="section-header">
                    <h2 id="vendas-titulo">📊 Vendas por Tipo</h2>
                    <p class="section-description">Distribuição das vendas por categoria</p>
                </header>
                
                <div class="cards-grid" role="group" aria-label="Estatísticas de vendas">
                    <article class="metric-card" aria-labelledby="vendas-e-label">
                        <div class="card-content">
                            <h3 id="vendas-e-label">📈 Vendas Extras (E)</h3>
                            <div class="metric-value" id="vendas-tipo-e" aria-live="polite">0</div>
                        </div>
                    </article>

                    <article class="metric-card" aria-labelledby="vendas-v-label">
                        <div class="card-content">
                            <h3 id="vendas-v-label">🛒 Vendas Normais (V)</h3>
                            <div class="metric-value" id="vendas-tipo-v" aria-live="polite">0</div>
                        </div>
                    </article>

                    <article class="metric-card" aria-labelledby="vendas-l-label">
                        <div class="card-content">
                            <h3 id="vendas-l-label">🏪 Vendas Loja (L)</h3>
                            <div class="metric-value" id="vendas-tipo-l" aria-live="polite">0</div>
                        </div>
                    </article>

                    <article class="metric-card highlight" aria-labelledby="vendas-total-label">
                        <div class="card-content">
                            <h3 id="vendas-total-label">📋 Total de Vendas</h3>
                            <div class="metric-value" id="total-vendas" aria-live="polite">0</div>
                        </div>
                    </article>
                </div>
            </section>

            <!-- Seção: Valores por Tipo -->
            <section class="dashboard-section" aria-labelledby="valores-titulo">
                <header class="section-header">
                    <h2 id="valores-titulo">💰 Valores por Categoria</h2>
                    <p class="section-description">Receitas específicas por tipo de operação</p>
                </header>
                
                <div class="cards-grid cards-grid--two-cols" role="group" aria-label="Valores por categoria">
                    <article class="metric-card warning" aria-labelledby="valores-e-label">
                        <div class="card-content">
                            <h3 id="valores-e-label">💎 Valores Extras (E)</h3>
                            <div class="metric-value" id="total-extras-e" aria-live="polite">R$ 0,00</div>
                        </div>
                    </article>

                    <article class="metric-card success" aria-labelledby="frete-l-label">
                        <div class="card-content">
                            <h3 id="frete-l-label">🚚 Frete Loja (L)</h3>
                            <div class="metric-value" id="total-frete-loja" aria-live="polite">R$ 0,00</div>
                        </div>
                    </article>
                </div>
            </section>

            <!-- Seção: Resumo Financeiro -->
            <section class="dashboard-section" aria-labelledby="financeiro-titulo">
                <header class="section-header">
                    <h2 id="financeiro-titulo">💰 Resumo Financeiro</h2>
                    <div class="section-actions">
                        <button type="button" class="btn btn-secondary btn-small" onclick="mostrarDetalhesCalculo()" 
                                aria-label="Ver detalhes do cálculo de lucros">
                            📋 Ver Detalhes
                        </button>
                        <button type="button" class="btn btn-secondary btn-small" onclick="refreshDashboard()" 
                                aria-label="Atualizar dados do dashboard">
                            🔄 Atualizar
                        </button>
                    </div>
                </header>
                
                <div class="cards-grid" role="group" aria-label="Resumo financeiro">
                    <article class="metric-card info" aria-labelledby="custo-postes-label">
                        <div class="card-content">
                            <h3 id="custo-postes-label">📦 Custo Total Postes (V)</h3>
                            <div class="metric-value" id="total-venda-postes" aria-live="polite">R$ 0,00</div>
                        </div>
                    </article>

                    <article class="metric-card success" aria-labelledby="arrecadado-label">
                        <div class="card-content">
                            <h3 id="arrecadado-label">💵 Total Arrecadado (V)</h3>
                            <div class="metric-value" id="valor-total-vendas" aria-live="polite">R$ 0,00</div>
                        </div>
                    </article>

                    <article class="metric-card warning" aria-labelledby="contribuicoes-label">
                        <div class="card-content">
                            <h3 id="contribuicoes-label">🎯 Contribuições E + L</h3>
                            <div class="metric-value" id="total-contribuicoes-extras" aria-live="polite">R$ 0,00</div>
                        </div>
                    </article>

                    <article class="metric-card danger" aria-labelledby="outras-despesas-label">
                        <div class="card-content">
                            <h3 id="outras-despesas-label">💸 Outras Despesas</h3>
                            <div class="metric-value" id="total-despesas" aria-live="polite">R$ 0,00</div>
                        </div>
                    </article>
                </div>
            </section>

            <!-- Seção: Detalhamento de Despesas -->
            <section class="dashboard-section expenses-section" aria-labelledby="despesas-titulo">
                <header class="section-header">
                    <h2 id="despesas-titulo">💸 Detalhamento de Despesas</h2>
                    <p class="section-description">Separação das despesas por categoria de impacto</p>
                </header>
                
                <div class="cards-grid cards-grid--three-cols" role="group" aria-label="Detalhamento de despesas">
                    <article class="metric-card danger" aria-labelledby="outras-detalhado-label">
                        <div class="card-content">
                            <h3 id="outras-detalhado-label">📋 Outras Despesas</h3>
                            <div class="metric-value" id="total-outras-despesas-detalhado" aria-live="polite">R$ 0,00</div>
                            <small class="card-note">Afeta lucro total</small>
                        </div>
                    </article>

                    <article class="metric-card warning" aria-labelledby="funcionario-detalhado-label">
                        <div class="card-content">
                            <h3 id="funcionario-detalhado-label">👥 Despesas Funcionário</h3>
                            <div class="metric-value" id="total-despesas-funcionario-detalhado" aria-live="polite">R$ 0,00</div>
                            <small class="card-note">Só afeta G&J</small>
                        </div>
                    </article>

                    <article class="metric-card neutral" aria-labelledby="geral-despesas-label">
                        <div class="card-content">
                            <h3 id="geral-despesas-label">💰 Total Geral</h3>
                            <div class="metric-value" id="total-geral-despesas" aria-live="polite">R$ 0,00</div>
                            <small class="card-note">Soma total</small>
                        </div>
                    </article>
                </div>

                <!-- Explicação dos Tipos de Despesa -->
                <div class="info-panel" role="region" aria-labelledby="info-despesas">
                    <h3 id="info-despesas">ℹ️ Como as despesas afetam o lucro:</h3>
                    <div class="info-grid">
                        <div class="info-item">
                            <strong class="text-danger">📋 Outras Despesas:</strong>
                            <span>Reduzem o lucro total de todos os sócios</span>
                        </div>
                        <div class="info-item">
                            <strong class="text-warning">👥 Funcionário:</strong>
                            <span>Afetam apenas a divisão entre Guilherme e Jefferson</span>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Seção: Distribuição de Lucros -->
            <section class="dashboard-section profit-section" aria-labelledby="lucros-titulo">
                <header class="section-header">
                    <h2 id="lucros-titulo">💎 Distribuição de Lucros</h2>
                    <p class="section-description">
                        Fórmula: (Lucro V + Extras E + Frete L) - Outras Despesas ÷ Sócios
                    </p>
                </header>

                <div class="cards-grid" role="group" aria-label="Distribuição de lucros">
                    <article class="profit-card total-profit" aria-labelledby="lucro-total-label">
                        <div class="card-content">
                            <h3 id="lucro-total-label">💰 Lucro Total</h3>
                            <div class="metric-value" id="lucro-total" aria-live="polite">R$ 0,00</div>
                            <small class="card-note">Base para distribuição</small>
                        </div>
                    </article>

                    <article class="profit-card cicero" aria-labelledby="cicero-label">
                        <div class="card-content">
                            <h3 id="cicero-label">👨 Parte do Cícero</h3>
                            <div class="metric-value" id="parte-cicero" aria-live="polite">R$ 0,00</div>
                            <small class="card-note">50% do lucro total</small>
                        </div>
                    </article>

                    <article class="profit-card gilberto" aria-labelledby="gilberto-label">
                        <div class="card-content">
                            <h3 id="gilberto-label">👨 Parte do Gilberto</h3>
                            <div class="metric-value" id="parte-gilberto" aria-live="polite">R$ 0,00</div>
                            <small class="card-note">25% menos funcionário</small>
                        </div>
                    </article>

                    <article class="profit-card jefferson" aria-labelledby="jefferson-label">
                        <div class="card-content">
                            <h3 id="jefferson-label">👨 Parte do Jefferson</h3>
                            <div class="metric-value" id="parte-jefferson" aria-live="polite">R$ 0,00</div>
                            <small class="card-note">25% menos funcionário</small>
                        </div>
                    </article>
                </div>
            </section>

            <!-- Seção: Estatísticas Gerais -->
            <section class="dashboard-section" aria-labelledby="estatisticas-titulo">
                <header class="section-header">
                    <h2 id="estatisticas-titulo">📈 Estatísticas Gerais</h2>
                    <p class="section-description">Indicadores de performance do negócio</p>
                </header>

                <div class="stats-grid" role="group" aria-label="Estatísticas gerais">
                    <article class="stat-item" aria-labelledby="postes-stat">
                        <div class="stat-number" id="total-postes" aria-live="polite">0</div>
                        <div class="stat-label" id="postes-stat">Postes Ativos</div>
                    </article>
                    
                    <article class="stat-item" aria-labelledby="despesas-stat">
                        <div class="stat-number" id="total-despesas-count" aria-live="polite">0</div>
                        <div class="stat-label" id="despesas-stat">Total Despesas</div>
                    </article>
                    
                    <article class="stat-item" aria-labelledby="ticket-stat">
                        <div class="stat-number" id="ticket-medio" aria-live="polite">R$ 0,00</div>
                        <div class="stat-label" id="ticket-stat">Ticket Médio (V)</div>
                    </article>
                    
                    <article class="stat-item" aria-labelledby="margem-stat">
                        <div class="stat-number" id="margem-lucro" aria-live="polite">0%</div>
                        <div class="stat-label" id="margem-stat">Margem de Lucro</div>
                    </article>
                </div>
            </section>

            <!-- Seção: Explicação dos Tipos -->
            <section class="dashboard-section info-section" aria-labelledby="tipos-titulo">
                <header class="section-header">
                    <h2 id="tipos-titulo">ℹ️ Guia dos Tipos de Venda</h2>
                    <p class="section-description">Entenda como cada tipo de venda funciona</p>
                </header>
                
                <div class="explanation-grid" role="group" aria-label="Tipos de venda">
                    <article class="explanation-card type-e">
                        <div class="card-icon">📈</div>
                        <h3>Tipo E - Extra</h3>
                        <p>Valores extras que contribuem diretamente para o lucro. Apenas data e valor extra são necessários.</p>
                        <div class="card-highlight">💡 Contribuição direta ao lucro</div>
                    </article>
                    
                    <article class="explanation-card type-v">
                        <div class="card-icon">🛒</div>
                        <h3>Tipo V - Venda Normal</h3>
                        <p>Vendas normais com postes. O valor do poste é fixo e usado no cálculo do lucro. SEM frete Eletrons.</p>
                        <div class="card-highlight">⚡ Base do negócio</div>
                    </article>
                    
                    <article class="explanation-card type-l">
                        <div class="card-icon">🏪</div>
                        <h3>Tipo L - Venda Loja</h3>
                        <p>Vendas de loja onde apenas o frete contribui para o lucro. Poste é apenas referência, SEM valor de venda.</p>
                        <div class="card-highlight">🚚 Apenas frete conta</div>
                    </article>
                </div>
            </section>

        </div>
    </main>

    <!-- Overlay de Carregamento -->
    <div id="loading-overlay" class="loading-overlay" role="status" aria-live="polite" aria-hidden="true">
        <div class="spinner" aria-hidden="true"></div>
        <p>Carregando dados...</p>
    </div>

    <!-- Container de Alertas -->
    <div id="alert-container" class="alert-container" role="alert" aria-live="assertive" aria-atomic="true"></div>

    <!-- Scripts -->
    <script src="js/index.js"></script>
</body>
</html>